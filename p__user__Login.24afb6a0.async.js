(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(w){w.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},32384:function(){},3178:function(){},12:function(w,q,e){"use strict";e.r(q),e.d(q,{default:function(){return ft}});var xt=e(18106),K=e(47428),Et=e(34792),W=e(48086),V=e(8870),$=e(3182),_=e(57337),St=e(38663),Nt=e(3178),B=e(22122),D=e(96156),U=e(28481),t=e(67294),fe=e(54549),me=e(15873),he=e(57119),ge=e(68628),pe=e(73218),ye=e(38819),Ce=e(68855),Ze=e(40847),xe=e(43061),Ee=e(63441),Se=e(94184),Y=e.n(Se),Ne=e(86032),Pe=e(5467),Fe=e(6610),je=e(5991),Ie=e(10379),Oe=e(44144),Le=function(n){(0,Ie.Z)(r,n);var a=(0,Oe.Z)(r);function r(){var s;return(0,Fe.Z)(this,r),s=a.apply(this,arguments),s.state={error:void 0,info:{componentStack:""}},s}return(0,je.Z)(r,[{key:"componentDidCatch",value:function(l,y){this.setState({error:l,info:y})}},{key:"render",value:function(){var l=this.props,y=l.message,C=l.description,x=l.children,d=this.state,N=d.error,E=d.info,I=E&&E.componentStack?E.componentStack:null,T=typeof y=="undefined"?(N||"").toString():y,p=typeof C=="undefined"?I:C;return N?t.createElement(te,{type:"error",message:T,description:t.createElement("pre",null,p)}):x}}]),r}(t.Component),Te=e(96159),Me=function(n,a){var r={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&a.indexOf(s)<0&&(r[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(n);l<s.length;l++)a.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(n,s[l])&&(r[s[l]]=n[s[l]]);return r},Be={success:ye.Z,info:Ze.Z,error:xe.Z,warning:Ce.Z},be={success:me.Z,info:ge.Z,error:pe.Z,warning:he.Z},ee=function(a){var r,s=a.description,l=a.prefixCls,y=a.message,C=a.banner,x=a.className,d=x===void 0?"":x,N=a.style,E=a.onMouseEnter,I=a.onMouseLeave,T=a.onClick,p=a.afterClose,O=a.showIcon,b=a.closable,h=a.closeText,v=a.closeIcon,f=v===void 0?t.createElement(fe.Z,null):v,m=a.action,g=Me(a,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),i=t.useState(!1),P=(0,U.Z)(i,2),u=P[0],L=P[1],M=t.useRef(),G=t.useContext(Ne.E_),Z=G.getPrefixCls,ue=G.direction,o=Z("alert",l),mt=function(S){var R;L(!0),(R=g.onClose)===null||R===void 0||R.call(g,S)},ht=function(){var S=g.type;return S!==void 0?S:C?"warning":"info"},gt=h?!0:b,de=ht(),pt=function(){var S=g.icon,R=(s?be:Be)[de]||null;return S?(0,Te.wm)(S,t.createElement("span",{className:"".concat(o,"-icon")},S),function(){return{className:Y()("".concat(o,"-icon"),(0,D.Z)({},S.props.className,S.props.className))}}):t.createElement(R,{className:"".concat(o,"-icon")})},yt=function(){return gt?t.createElement("button",{type:"button",onClick:mt,className:"".concat(o,"-close-icon"),tabIndex:0},h?t.createElement("span",{className:"".concat(o,"-close-text")},h):f):null},ve=C&&O===void 0?!0:O,Ct=Y()(o,"".concat(o,"-").concat(de),(r={},(0,D.Z)(r,"".concat(o,"-with-description"),!!s),(0,D.Z)(r,"".concat(o,"-no-icon"),!ve),(0,D.Z)(r,"".concat(o,"-banner"),!!C),(0,D.Z)(r,"".concat(o,"-rtl"),ue==="rtl"),r),d),Zt=(0,Pe.Z)(g);return t.createElement(Ee.Z,{visible:!u,motionName:"".concat(o,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(S){return{maxHeight:S.offsetHeight}},onLeaveEnd:p},function(z){var S=z.className,R=z.style;return t.createElement("div",(0,B.Z)({ref:M,"data-show":!u,className:Y()(Ct,S),style:(0,B.Z)((0,B.Z)({},N),R),onMouseEnter:E,onMouseLeave:I,onClick:T,role:"alert"},Zt),ve?pt():null,t.createElement("div",{className:"".concat(o,"-content")},y?t.createElement("div",{className:"".concat(o,"-message")},y):null,s?t.createElement("div",{className:"".concat(o,"-description")},s):null),m?t.createElement("div",{className:"".concat(o,"-action")},m):null,yt())})};ee.ErrorBoundary=Le;var te=ee,ze=e(94043),F=e.n(ze),j=e(28991),Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},Ae=Re,ne=e(27029),ae=function(a,r){return t.createElement(ne.Z,(0,j.Z)((0,j.Z)({},a),{},{ref:r,icon:Ae}))};ae.displayName="LockOutlined";var re=t.forwardRef(ae),$e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},De=$e,se=function(a,r){return t.createElement(ne.Z,(0,j.Z)((0,j.Z)({},a),{},{ref:r,icon:De}))};se.displayName="MobileOutlined";var Ge=t.forwardRef(se),Ve=e(89366),Pt=e(84305),Ue=e(3764),J=e(81253),He=e(99180),Ke=e(35375),Ft=e(32384),We=["logo","message","contentStyle","title","subTitle","actions","children"];function Ye(n){var a=n.logo,r=n.message,s=n.contentStyle,l=n.title,y=n.subTitle,C=n.actions,x=n.children,d=(0,J.Z)(n,We),N=(0,Ke.YB)(),E=d.submitter===!1?!1:(0,j.Z)((0,j.Z)({searchConfig:{submitText:N.getMessage("loginForm.submitText","\u767B\u5F55")},submitButtonProps:{size:"large",style:{width:"100%"}}},d.submitter),{},{render:function(h,v){var f,m,g=v.pop();if((d==null||(f=d.submitter)===null||f===void 0?void 0:f.render)===void 0)return g;if(typeof(d==null||(m=d.submitter)===null||m===void 0?void 0:m.render)=="function"){var i,P;return d==null||(i=d.submitter)===null||i===void 0||(P=i.render)===null||P===void 0?void 0:P.call(i,h,v)}return g}}),I=(0,t.useContext)(Ue.ZP.ConfigContext),T=I.getPrefixCls("pro-form-login"),p=function(h){return"".concat(T,"-").concat(h)},O=(0,t.useMemo)(function(){return a?typeof a=="string"?t.createElement("img",{src:a}):a:null},[a]);return t.createElement("div",{className:p("container")},t.createElement("div",{className:p("top")},l||O?t.createElement("div",{className:p("header")},O?t.createElement("span",{className:p("logo")},O):null,l?t.createElement("span",{className:p("title")},l):null):null,y?t.createElement("div",{className:p("desc")},y):null),t.createElement("div",{className:p("main"),style:(0,j.Z)({width:328},s)},t.createElement(He.A,(0,B.Z)({isKeyPressSubmit:!0},d,{submitter:E}),r,x),C?t.createElement("div",{className:p("other")},C):null))}var jt=e(9715),Je=e(17681),It=e(57663),Qe=e(80226),Ot=e(47673),Xe=e(4107),ke=e(87757),H=e.n(ke),oe=e(92137),le=e(32185),we=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],qe=t.forwardRef(function(n,a){var r=(0,t.useState)(n.countDown||60),s=(0,U.Z)(r,2),l=s[0],y=s[1],C=(0,t.useState)(!1),x=(0,U.Z)(C,2),d=x[0],N=x[1],E=(0,t.useState)(),I=(0,U.Z)(E,2),T=I[0],p=I[1],O=n.rules,b=n.name,h=n.phoneName,v=n.fieldProps,f=n.captchaTextRender,m=f===void 0?function(u,L){return u?"".concat(L," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:f,g=n.captchaProps,i=(0,J.Z)(n,we),P=function(){var u=(0,oe.Z)(H().mark(function L(M){return H().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.prev=0,p(!0),Z.next=4,i.onGetCaptcha(M);case 4:p(!1),N(!0),Z.next=13;break;case 8:Z.prev=8,Z.t0=Z.catch(0),N(!1),p(!1),console.log(Z.t0);case 13:case"end":return Z.stop()}},L,null,[[0,8]])}));return function(M){return u.apply(this,arguments)}}();return(0,t.useEffect)(function(){var u=0,L=n.countDown;return d&&(u=window.setInterval(function(){y(function(M){return M<=1?(N(!1),clearInterval(u),L||60):M-1})},1e3)),function(){return clearInterval(u)}},[d]),t.createElement(Je.Z.Item,{noStyle:!0,shouldUpdate:!0},function(u){var L=u.getFieldValue,M=u.validateFields;return t.createElement("div",{style:(0,j.Z)((0,j.Z)({},v==null?void 0:v.style),{},{display:"flex",alignItems:"center"}),ref:a},t.createElement(Xe.Z,(0,B.Z)({},v,{style:{flex:1,transition:"width .3s",marginRight:8}})),t.createElement(Qe.Z,(0,B.Z)({style:{display:"block"},disabled:d,loading:T},g,{onClick:(0,oe.Z)(H().mark(function G(){var Z;return H().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,!h){o.next=9;break}return o.next=4,M([h].flat(1));case 4:return Z=L([h].flat(1)),o.next=7,P(Z);case 7:o.next=11;break;case 9:return o.next=11,P("");case 11:o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0),console.log(o.t0);case 16:case"end":return o.stop()}},G,null,[[0,13]])}))}),m(d,l)))})}),_e=(0,le.G)(qe),et=_e,Lt=e(63185),tt=e(9676),nt=e(28849),at=e(22270),rt=["options","fieldProps","proFieldProps","valueEnum"],st=t.forwardRef(function(n,a){var r=n.options,s=n.fieldProps,l=n.proFieldProps,y=n.valueEnum,C=(0,J.Z)(n,rt);return t.createElement(nt.Z,(0,B.Z)({ref:a,valueType:"checkbox",mode:"edit",valueEnum:(0,at.h)(y,void 0),fieldProps:(0,j.Z)({options:r},s),proFieldProps:l},C))}),ot=t.forwardRef(function(n,a){var r=n.fieldProps,s=n.children;return t.createElement(tt.Z,(0,B.Z)({ref:a},r),s)}),lt=(0,le.G)(ot,{valuePropName:"checked"}),ie=lt;ie.Group=st;var it=ie,Q=e(5966),X=e(4614),ct=e(29791);function ut(n,a){return k.apply(this,arguments)}function k(){return k=(0,$.Z)(F().mark(function n(a,r){return F().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,X.WY)("/api/login/captcha",(0,V.Z)({method:"GET",params:(0,V.Z)({},a)},r||{})));case 1:case"end":return l.stop()}},n)})),k.apply(this,arguments)}var dt=e(34687),A=e.n(dt),c=e(85893),ce=function(a){var r=a.content;return(0,c.jsx)(te,{style:{marginBottom:24},message:r,type:"error",showIcon:!0})},vt=function(){var a=(0,t.useState)({}),r=(0,_.Z)(a,2),s=r[0],l=r[1],y=(0,t.useState)("account"),C=(0,_.Z)(y,2),x=C[0],d=C[1],N=(0,X.tT)("@@initialState"),E=N.initialState,I=N.setInitialState,T=function(){var h=(0,$.Z)(F().mark(function v(){var f,m;return F().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,E==null||(f=E.fetchUserInfo)===null||f===void 0?void 0:f.call(E);case 2:if(m=i.sent,!m){i.next=6;break}return i.next=6,I(function(P){return(0,V.Z)((0,V.Z)({},P),{},{currentUser:m})});case 6:case"end":return i.stop()}},v)}));return function(){return h.apply(this,arguments)}}(),p=function(){var h=(0,$.Z)(F().mark(function v(f){var m,g,i;return F().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,m={status:"ok",type:x,currentAuthority:f.username},m.status!=="ok"){u.next=9;break}return g="\u767B\u5F55\u6210\u529F\uFF01",W.default.success(g),u.next=7,T();case 7:return X.m8.push("/productivet-task"),u.abrupt("return");case 9:console.log(m),l(m),u.next=17;break;case 13:u.prev=13,u.t0=u.catch(0),i="\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01",W.default.error(i);case 17:case"end":return u.stop()}},v,null,[[0,13]])}));return function(f){return h.apply(this,arguments)}}(),O=s.status,b=s.type;return(0,c.jsxs)("div",{className:A().container,children:[(0,c.jsx)("div",{className:A().content,children:(0,c.jsxs)(Ye,{logo:(0,c.jsx)("img",{alt:"logo",src:"/logo.png"}),title:"\u6570\u63A7\u7CFB\u7EDF",subTitle:"\u52A0\u6CB9\u6253\u6C14\u5403\u9971\u996D",initialValues:{autoLogin:!0},onFinish:function(){var h=(0,$.Z)(F().mark(function v(f){return F().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,p(f);case 2:case"end":return g.stop()}},v)}));return function(v){return h.apply(this,arguments)}}(),children:[(0,c.jsxs)(K.Z,{activeKey:x,onChange:d,children:[(0,c.jsx)(K.Z.TabPane,{tab:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"},"account"),(0,c.jsx)(K.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55"},"mobile")]}),O==="error"&&b==="account"&&(0,c.jsx)(ce,{content:"\u9519\u8BEF\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801(admin/ant.design)"}),x==="account"&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Q.Z,{name:"username",fieldProps:{size:"large",prefix:(0,c.jsx)(Ve.Z,{className:A().prefixIcon})},placeholder:"\u7528\u6237\u540D: admin or user",rules:[{required:!0,message:"\u7528\u6237\u540D\u662F\u5FC5\u586B\u9879\uFF01"}]}),(0,c.jsx)(Q.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,c.jsx)(re,{className:A().prefixIcon})},placeholder:"\u5BC6\u7801: 1234",rules:[{required:!0,message:"\u5BC6\u7801\u662F\u5FC5\u586B\u9879\uFF01"}]})]}),O==="error"&&b==="mobile"&&(0,c.jsx)(ce,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),x==="mobile"&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Q.Z,{fieldProps:{size:"large",prefix:(0,c.jsx)(Ge,{className:A().prefixIcon})},name:"mobile",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01",rules:[{required:!0,message:"\u624B\u673A\u53F7\u662F\u5FC5\u586B\u9879\uFF01"},{pattern:/^1\d{10}$/,message:"\u4E0D\u5408\u6CD5\u7684\u624B\u673A\u53F7\uFF01"}]}),(0,c.jsx)(et,{fieldProps:{size:"large",prefix:(0,c.jsx)(re,{className:A().prefixIcon})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01",captchaTextRender:function(v,f){return v?"".concat(f," ","\u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",rules:[{required:!0,message:"\u9A8C\u8BC1\u7801\u662F\u5FC5\u586B\u9879\uFF01"}],onGetCaptcha:function(){var h=(0,$.Z)(F().mark(function v(f){var m;return F().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,ut({phone:f});case 2:if(m=i.sent,m!==!1){i.next=5;break}return i.abrupt("return");case 5:W.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return i.stop()}},v)}));return function(v){return h.apply(this,arguments)}}()})]}),(0,c.jsxs)("div",{style:{marginBottom:24},children:[(0,c.jsx)(it,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,c.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801 ?"})]})]})}),(0,c.jsx)(ct.Z,{})]})},ft=vt}}]);
